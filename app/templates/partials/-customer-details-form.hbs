<h2>{{t 'home.step3.header'}}</h2>
<div class="row">
	<div class="col-xs-12">

		<h4>{{t 'home.step3.customerTypeHeader'}}</h4>
		<div class="row">
			<div class="col-xs-12">
				<label for="customerTypeSelector">{{t 'home.step3.customerTypeLabel'}}</label>
				{{view "select" class="form-control" id="customerTypeSelector"
				content=customerTypes
				optionValuePath="content.id"
				optionLabelPath=optionLabelPath
				selection=selectedCustomerType
				prompt=(t 'home.step3.customerTypePrompt')
				}}
			</div>
		</div>

		<!-- customerInfoForm start -->
		{{#if isCustomerTypeSet}}
		<h4>{{t 'home.step3.customerDetailsSubheader'}}</h4>

		{{#if showOrganisation}}
		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isOrganisationValid::has-error"}}>
					<label for="organizationInput">{{t 'home.customerDetails.organisation'}}{{#if isOrganisationMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="organizationInput" classBinding=":form-control" value=customerDetails.organisation}}
				</div>
			</div>
		</div>
		{{/if}}

		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isNameValid::has-error"}}>
					<label for="nameInput">{{t 'home.customerDetails.name'}} <i class="fa fa-asterisk mandatory"></i></label>
					{{input type='text' id="nameInput" classBinding=":form-control" value=customerDetails.name}}
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isEmailValid::has-error"}}>
					<label for="emailInput">{{t 'home.customerDetails.emailAddress'}}{{#if isEmailMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='email' id="emailInput" classBinding=":form-control" value=customerDetails.emailAddress}}
				</div>
			</div>
		</div>

		{{#if showDepartment}}
		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isDepartmentValid::has-error"}}>
					<label for="institutionInput">{{t 'home.customerDetails.department'}}{{#if isDepartmentMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="institutionInput" classBinding=":form-control" value=customerDetails.department}}
				</div>
			</div>
		</div>
		{{/if}}

		{{#if showUnit}}
		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isUnitValid::has-error"}}>
					<label for="departmentInput">{{t 'home.customerDetails.unit'}}{{#if isUnitMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="departmentInput" classBinding=":form-control" value=customerDetails.unit}}
				</div>
			</div>
		</div>
		{{/if}}

		{{#if showAddress}}
		<div class="row">
			<div class="col-xs-12">
				<div class="form-group">
					<label for="addressInput">{{t 'home.customerDetails.address'}}</label>
					{{input type='text' id="addressInput" classBinding=":form-control" value=customerDetails.address}}
				</div>
			</div>
		</div>
		{{/if}}

		{{#if showPostalCode}}
		<div class="row">
			<div class="col-xs-12">
				<div class="form-group">
					<label for="postalCodeInput">{{t 'home.customerDetails.postalCode'}}</label>
					{{input type='text' id="postalCodeInput" classBinding=":form-control" value=customerDetails.postalCode}}
				</div>
			</div>
		</div>
		{{/if}}

		{{#if showCity}}
		<div class="row">
			<div class="col-xs-12">
				<div class="form-group">
					<label for="cityInput">{{t 'home.customerDetails.city'}}</label>
					{{input type='text' id="cityInput" classBinding=":form-control" value=customerDetails.city}}
				</div>
			</div>
		</div>
		{{/if}}

		{{#if showLibraryCardNumber}}
		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isLibraryCardNumberValid::has-error"}}>
					<label for="libraryCardNumberInput">{{t 'home.customerDetails.libraryCardNumber'}}{{#if isLibraryCardNumberMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="libraryCardNumberInput" classBinding=":form-control" value=customerDetails.libraryCardNumber}}
				</div>
			</div>
		</div>
		{{/if}}

		{{#if showXAccount}}
		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isXAccountValid::has-error"}}>
					<label for="xAccountInput">{{t 'home.customerDetails.xAccount'}}{{#if isXAccountMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="xAccountInput" classBinding=":form-control" value=customerDetails.xAccount}}
				</div>
				<div>
					<span id="helpBlock" class="help-block">{{t 'home.step3.xAccountHelptext'}}</span>
				</div>
			</div>
		</div>
		{{/if}}
		<!-- customerInfoForm end -->

		<!-- deliveryChoiceDropDown start -->

		<h4>{{t 'home.step3.deliveryOptionsSubheader'}}</h4>




		{{#if isShippingAvailable}}


		<div class="row">
			<div class="col-xs-12">
				<label for="deliveryMethordSelector">{{t 'home.step3.deliveryOptionsSubheader'}} <i class="fa fa-asterisk mandatory"></i></label>
				{{view "select" class="form-control" id="deliveryMethordSelector"
				content=deliveryMethods
				optionValuePath="content.id"
				optionLabelPath=optionLabelPath
				selection=selectedDeliveryMethod
				prompt=(t 'home.step3.deliveryMethodPrompt')
				}}
			</div>
		</div>
		{{/if }}
		<!-- deliveryChoiceDropDown end -->

		<!-- div  deliveryInfoText            : start                                 -->
		{{#if showDeliveryInfoText}}

		<div class="row">
			<div class="col-xs-12">
				<div class="alert alert-info" role="alert">{{t 'home.step3.pickupInfoText'}} {{selectedLibraryNameString}}</div>
			</div>
		</div>
		{{/if }}
		<!-- /div deliveryInfoText            : end                                   -->

		<!-- div deliveryInfoForm             : start                                 -->
		{{#if showDeliveryInfoForm}}
		<h4>{{t 'home.step3.deliveryDetailsSubheader'}}</h4>

		{{#if showDeliveryAddressFields}}
		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isDeliveryAddressValid::has-error"}}>
					<label for="deliveryAddressInput">{{t 'home.deliveryDetails.address'}}{{#if areDeliveryAddressFieldsMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="deliveryAddressInput" classBinding=":form-control" value=deliveryDetails.address}}
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isDeliveryPostalCodeValid::has-error"}}>
					<label for="deliveryPostalCodeInput">{{t 'home.deliveryDetails.postalCode'}}{{#if areDeliveryAddressFieldsMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="deliveryPostalCodeInput" classBinding=":form-control" value=deliveryDetails.postalCode}}
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isDeliveryCityValid::has-error"}}>
					<label for="deliveryCityInput">{{t 'home.deliveryDetails.city'}}{{#if areDeliveryAddressFieldsMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="deliveryCityInput" classBinding=":form-control" value=deliveryDetails.city}}
				</div>
			</div>
		</div>
		{{/if}}
		{{#if showDeliveryBoxField}}
		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isDeliveryBoxFieldValid::has-error"}}>
					<label for="deliveryBoxInput">{{t 'home.deliveryDetails.box'}}{{#if isDeliveryBoxFieldMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="deliveryBoxInput" classBinding=":form-control" value=deliveryDetails.box}}
				</div>
			</div>
		</div>
		<div class="row">
		  <div class="col-xs-12">
		    <div {{bind-attr class=":form-group"}}>
		      <label for="deliveryCommentsInput" class="control-label">{{t 'home.deliveryDetails.comment'}}</label>
		      {{textarea id="deliveryCommentsInput" classBinding=":form-control" value=controllers.application.deliveryDetails.comment}}
		    </div>
		  </div>
		</div> <!-- end row -->
		{{/if}}
		<!-- div deliveryInfoForm             : end                                   -->

		{{/if }}

		<!-- billingInfoForm start -->
		{{#if isInvoicingAvaliable}}
		<h4>{{t 'home.step3.invoicingDetailsSubheader'}}</h4>

		{{#if showCustomerId}}
		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isCustomerIdValid::has-error"}}>
					<label for="customerIdInput">{{t 'home.invoicingDetails.customerId'}}{{#if isCustomerIdMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="customerIdInput" classBinding=":form-control" value=invoicingDetails.customerId}}
				</div>
				<div>
					<span id="helpBlock" class="help-block">{{t 'home.step3.customerIdHelptext'}}</span>
				</div>
			</div>
		</div>
		{{/if}}
		{{#if showInvoicingAddressFields}}
		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isInvoicingCompanyValid::has-error"}}>
					<label for="invoicingCompanyInput">{{t 'home.invoicingDetails.company'}}{{#if areInvoicingAddressFieldsMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="invoicingCompanyInput" classBinding=":form-control" value=invoicingDetails.company}}
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isInvoicingNameValid::has-error"}}>
					<label for="invoicingNameInput">{{t 'home.invoicingDetails.name'}}{{#if areInvoicingAddressFieldsMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="invoicingNameInput" classBinding=":form-control" value=invoicingDetails.name}}
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isInvoicingAddressValid::has-error"}}>
					<label for="invoicingAddressInput">{{t 'home.invoicingDetails.address'}}{{#if areInvoicingAddressFieldsMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="invoicingAddressInput" classBinding=":form-control" value=invoicingDetails.address}}
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group isInvoicingPostalCodeValid::has-error"}}>
					<label for="invoicingPostalCodeInput">{{t 'home.invoicingDetails.postalCode'}}{{#if areInvoicingAddressFieldsMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="invoicingPostalCodeInput" classBinding=":form-control" value=invoicingDetails.postalCode}}
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-12">
				<div {{bind-attr class=":form-group areInvoicingAddressFieldsValid::has-error"}}>
					<label for="invoicingCityInput">{{t 'home.invoicingDetails.city'}}{{#if areInvoicingAddressFieldsMandatory}} <i class="fa fa-asterisk mandatory"></i>{{/if}}</label>
					{{input type='text' id="invoicingCityInput" classBinding=":form-control" value=invoicingDetails.city}}
				</div>
			</div>
		</div>
		{{/if}}

		{{/if }}
		<div class="row">
		  <div class="col-xs-12 mandatory-text">
		    <div class="pull-right">
		      <p {{bind-attr class="isFormComplete::text-danger"}}><i class="fa fa-asterisk mandatory"></i> {{t 'home.step3.mandatoryText'}}</p>
		    </div>
		  </div>
		</div> <!-- end row -->
	{{/if }}
	</div>
</div>
<div class="row">
	<div class="col-xs-12 next-prev">
		<button {{action 'back'}} {{ bind-attr class=":btn :btn-link"}}><i class="fa fa-chevron-left"></i> {{t 'home.step3.prevBtn'}}</button>
		<button {{action 'nextstep'  }} disabled={{unless isFormComplete 'disabled'}} {{ bind-attr class=":btn :btn-primary :pull-right isFormComplete::disabled"}}>{{t 'home.step3.nextBtn'}} <i class="fa fa-chevron-right"></i></button>
	</div>
</div>
